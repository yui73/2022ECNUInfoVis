<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>DataVis_Practice_02</title>
  </head>
  <body>
    <!-- 载入D3库 -->
    <script src="../static/js/d3.v3.min.js"></script>

    <!-- 载入K-means算法库 -->
    <script src="../kmeans/lib/kmeans.js"></script>
    <script src="../kmeans/lib/cluster.js"></script>
    <script src="../kmeans/lib/distance.js"></script>

    <!-- 
	  -- 一个画布
	  -- 画布相关代码参考：https://www.w3school.com.cn/html5/html_5_canvas.asp
    -->
    <canvas
      id="myCanvas"
      width="690"
      height="457"
      style="border: 1px solid #c3c3c3"
    >
      Your browser does not support the canvas element.
    </canvas>

    <script type="text/javascript">
      
      var img = new Image();
      img.src = "images/01.jpg";
      img.onload = function () {
        var context = document.getElementById("myCanvas").getContext("2d");
        context.drawImage(img, 0, 0);

        // data中保存了图片所有像素的颜色信息，每个像素的RGBA信息占数组中4位
        // RGBA为像素的红色、绿色、蓝色、透明度四个分量
        var data = context.getImageData(0, 0, 690, 457).data;
        // 处理data/4个一组/组一个新的data
        var newData = [];
        console.log(data.length);
        for(i=0;i<data.length;i=i+4){
          var chunk = [];
          chunk.push(data[i]);
          chunk.push(data[i+1]);
          chunk.push(data[i+2]);
          chunk.push(data[i+3]);
          newData.push(chunk);
        }
        // console.log(newData);
        // 调用接口
        var temp = KMeans(newData,1);

        // const t1 = data.length;
        // /**
        //  * @brief: 随机取像素点
        //  */        
        // // console.log(t1);
        // // const t=Math.floor(Math.random() * Math.floor(t1/4));
        // // // console.log(t);
        // // // 四个一组随机取
        // // console.log(data[4*t],data[4*t+1],data[4*t+2],data[4*t+3]);
        // // 
        // var list = [];


      };
      // 重构数据结构/4个一组/组一个新的list

      // JS实现K-means聚类
      // 对聚类结果使用EChart可视化
    </script>
  </body>
</html>
